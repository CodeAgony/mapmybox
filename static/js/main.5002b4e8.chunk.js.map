{"version":3,"sources":["components/map/restaurant-15.svg","context/appContext.js","components/map/CustomMarker.js","components/map/CustomPopup.js","components/map/MapContainer.js","components/layout/SideBarButton.js","components/sidebar/Search.js","components/sidebar/OutputItem.js","components/sidebar/SideBar.js","context/appReducer.js","context/types.js","context/AppState.js","App.js","index.js"],"names":["module","exports","appContext","createContext","CustomMarker","place","setPopup","useContext","AppContext","coordinates","center","onClick","src","Icon","className","alt","CustomPopup","popupData","anchor","offset","location","text","address","Map","ReactMapboxGl","accessToken","MapContainer","places","getPlaces","filteredPlaces","useEffect","style","containerStyle","height","width","undefined","length","map","key","id","SideBarButton","setVisibility","Search","filterPlaces","useRef","onSubmit","e","preventDefault","type","placeholder","ref","onChange","event","current","value","OutputItem","SideBar","isVisible","state","action","payload","filter","regex","RegExp","match","place_name","AppState","props","initialState","useReducer","AppReducer","dispatch","a","axios","res","data","features","Provider","slice","indexOf","children","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5002b4e8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/restaurant-15.1e7497ce.svg\";","import { createContext } from 'react';\n\nconst appContext = createContext();\n\nexport default appContext;\n","import React, { useContext } from 'react';\nimport { Marker } from 'react-mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport Icon from './restaurant-15.svg';\n\nimport AppContext from '../../context/appContext';\n\nconst CustomMarker = ({ place }) => {\n  const appContext = useContext(AppContext);\n  const { setPopup } = appContext;\n\n  const handleClick = () => {\n    setPopup(place);\n  };\n\n  return (\n    <Marker\n      coordinates={[place.center[0], place.center[1]]}\n      onClick={handleClick}\n    >\n      <img src={Icon} className=\"noselect\" alt=\"\" />\n    </Marker>\n  );\n};\n\nexport default CustomMarker;\n","import React, { useContext } from 'react';\nimport { Popup } from 'react-mapbox-gl';\nimport AppContext from '../../context/appContext';\n\nconst CustomPopup = () => {\n  const appContext = useContext(AppContext);\n  const { popupData } = appContext;\n\n  return (\n    <Popup anchor={'bottom'} offset={25} coordinates={popupData.location}>\n      <h5>{popupData.text}</h5>\n      <h6>{popupData.address}</h6>\n    </Popup>\n  );\n};\n\nexport default CustomPopup;\n","import React, { useEffect, useContext } from 'react';\nimport ReactMapboxGl, { Popup } from 'react-mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport CustomMarker from './CustomMarker';\nimport CustomPopup from './CustomPopup';\n\nimport AppContext from '../../context/appContext';\n\nconst Map = ReactMapboxGl({\n  accessToken:\n    'pk.eyJ1IjoiY29kZWFnb255IiwiYSI6ImNqemg5NHE4dDBiMGczbG16cDhyb3Q1NTYifQ.h_WYdEWMtkuogpC9_l89SQ'\n});\n\nconst MapContainer = () => {\n  const appContext = useContext(AppContext);\n  const { places, getPlaces, popupData, filteredPlaces } = appContext;\n\n  useEffect(() => {\n    getPlaces();\n  }, []);\n\n  // Add marker for each place\n  const markers = () => {\n    if ((places !== null) & (!filteredPlaces.length > 0)) {\n      return places.map(place => (\n        <CustomMarker place={place} key={place.id} coordinates={place.center} />\n      ));\n    } else if (filteredPlaces.length > 0) {\n      return filteredPlaces.map(place => (\n        <CustomMarker\n          place={place}\n          key={place.id}\n          coordinates={place.center}\n        ></CustomMarker>\n      ));\n    }\n  };\n\n  return (\n    <div>\n      <Map\n        style=\"mapbox://styles/mapbox/streets-v9\"\n        center={[28.4685, 49.2344]}\n        containerStyle={{\n          height: '100vh',\n          width: '100vw'\n        }}\n      >\n        {(popupData !== undefined) & (typeof popupData !== 'string') && (\n          <CustomPopup></CustomPopup>\n        )}\n        {markers()}\n      </Map>\n    </div>\n  );\n};\n\nexport default MapContainer;\n","import React, { useContext } from 'react';\nimport AppContext from '../../context/appContext';\n\nconst SideBarButton = () => {\n  const appContext = useContext(AppContext);\n\n  const { setVisibility } = appContext;\n\n  const onClick = () => {\n    setVisibility();\n  };\n  return (\n    <div className=\"sidebar-button\" onClick={onClick}>\n      <i className=\"fas fa-lg fa-search-location\"></i>\n    </div>\n  );\n};\n\nexport default SideBarButton;\n","import React, { useContext, useRef } from 'react';\nimport AppContext from '../../context/appContext';\n\nconst Search = () => {\n  const appContext = useContext(AppContext);\n  const { filterPlaces } = appContext;\n\n  const text = useRef(null);\n\n  const onChange = event => {\n    event.preventDefault();\n    filterPlaces(text.current.value);\n  };\n\n  return (\n    <div className=\"search\">\n      <form onSubmit={e => e.preventDefault()}>\n        <input\n          type=\"text\"\n          placeholder=\"Filter places\"\n          className=\"search-input\"\n          ref={text}\n          onChange={onChange}\n        />\n      </form>\n    </div>\n  );\n};\n\nexport default Search;\n","import React, { useContext } from 'react';\r\nimport AppContext from '../../context/appContext';\r\n\r\nconst OutputItem = ({ place }) => {\r\n  const appContext = useContext(AppContext);\r\n  const { setPopup } = appContext;\r\n\r\n  const handleClick = () => {\r\n    setPopup(place);\r\n  };\r\n\r\n  return (\r\n    <p className=\"output-item\" onClick={handleClick}>\r\n      {place.text}\r\n    </p>\r\n  );\r\n};\r\n\r\nexport default OutputItem;\r\n","import React, { useContext } from 'react';\nimport Search from './Search';\nimport OutputItem from './OutputItem';\n\nimport AppContext from '../../context/appContext';\n\nconst SideBar = () => {\n  const appContext = useContext(AppContext);\n  const { isVisible, places, filteredPlaces } = appContext;\n  const toRender = () => {\n    if ((places !== null) & (!filteredPlaces.length > 0)) {\n      return places.map(place => <OutputItem place={place} key={place.id} />);\n    } else if (filteredPlaces.length > 0) {\n      return filteredPlaces.map(place => (\n        <OutputItem place={place} key={place.id} />\n      ));\n    }\n  };\n\n  return (\n    <div className={isVisible ? 'sidebar sidebar-visible' : 'sidebar'}>\n      <h3>Vinnytsia</h3>\n      <Search />\n      {toRender()}\n    </div>\n  );\n};\n\nexport default SideBar;\n","import { GET_PLACES, FILTER_PLACES, SET_VISIBILITY, SET_POPUP } from './types';\n\nexport default (state, action) => {\n  switch (action.type) {\n    case GET_PLACES:\n      return {\n        ...state,\n        places: action.payload\n      };\n\n    case FILTER_PLACES:\n      return {\n        ...state,\n        filteredPlaces:\n          action.payload.length > 0 &&\n          state.places.filter(place => {\n            const regex = new RegExp(`${action.payload}`, `gi`);\n            return place.text.match(regex) || place.place_name.match(regex);\n          })\n      };\n\n    case SET_VISIBILITY:\n      return {\n        ...state,\n        isVisible: action.payload\n      };\n\n    case SET_POPUP:\n      return {\n        ...state,\n        popupData: action.payload\n      };\n  }\n};\n","export const GET_PLACES = 'GET_PLACES';\r\nexport const FILTER_PLACES = 'SET_PLACES';\r\nexport const SET_POPUP = 'SET_POPUP';\r\nexport const SET_VISIBILITY = 'SET_VISIBILITY';\r\n","import React, { useReducer } from 'react';\nimport axios from 'axios';\nimport AppContext from './appContext';\nimport AppReducer from './appReducer';\nimport { GET_PLACES, SET_VISIBILITY, SET_POPUP, FILTER_PLACES } from './types';\n\nconst AppState = props => {\n  const initialState = {\n    places: null,\n    filteredPlaces: [],\n    isVisible: false,\n    popupData: undefined\n  };\n\n  const [state, dispatch] = useReducer(AppReducer, initialState);\n\n  // Get places\n  const getPlaces = async () => {\n    const res = await axios(\n      'https://api.mapbox.com/geocoding/v5/mapbox.places/restaurant.json?proximity=28.4685,%2049.2344&bbox=27.37442,48.06551,30.023758,49.889038&limit=10&access_token=pk.eyJ1IjoiY29kZWFnb255IiwiYSI6ImNqemg5NHE4dDBiMGczbG16cDhyb3Q1NTYifQ.h_WYdEWMtkuogpC9_l89SQ'\n    );\n\n    dispatch({\n      type: GET_PLACES,\n      payload: res.data.features\n    });\n  };\n\n  // Filter places\n  const filterPlaces = value => {\n    dispatch({\n      type: FILTER_PLACES,\n      payload: value\n    });\n  };\n\n  // Set sidebar visibility\n  const setVisibility = () => {\n    state.isVisible\n      ? dispatch({\n          type: SET_VISIBILITY,\n          payload: false\n        })\n      : dispatch({\n          type: SET_VISIBILITY,\n          payload: true\n        });\n  };\n\n  // Set popup\n  const setPopup = place => {\n    if (state.popupData === undefined || typeof state.popupData === 'object') {\n      dispatch({\n        type: SET_POPUP,\n        payload: {\n          text: place.text,\n          location: place.center,\n          address: place.place_name.slice(place.place_name.indexOf(',') + 1)\n        }\n      });\n    }\n  };\n\n  return (\n    <AppContext.Provider\n      value={{\n        places: state.places,\n        filteredPlaces: state.filteredPlaces,\n        isVisible: state.isVisible,\n        popupData: state.popupData,\n        getPlaces,\n        filterPlaces,\n        setVisibility,\n        setPopup\n      }}\n    >\n      {props.children}\n    </AppContext.Provider>\n  );\n};\n\nexport default AppState;\n","import React from 'react';\nimport MapContainer from './components/map/MapContainer';\nimport SideBarButton from './components/layout/SideBarButton';\nimport SideBar from './components/sidebar/SideBar';\n\nimport AppState from './context/AppState';\n\nfunction App() {\n  return (\n    <AppState>\n      <div className=\"App\">\n        <SideBarButton />\n        <SideBar />\n        <MapContainer />\n      </div>\n    </AppState>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}